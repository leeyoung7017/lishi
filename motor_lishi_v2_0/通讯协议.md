## 修改版本2.0

* 界面修改
  * 按照电机号将控制指令分散开来
  * 实现多个电机同时运作
  * 添加控制电机移动的最高速度

## 发送指令

帧长：

帧头：0x55aa

指令：	COMMAND+电机号+方向+步数+speed+运行指令+CRC16(**CRC16/XMODEM**)

| COMMAND | 电机运行 | 暂停 | 继续 | 复位 |
| ------- | -------- | ---- | ---- | ---- |
| 指令    | 00       | 01   | 02   | 03   |



| 电机号 | 20号电机 | ...  | 4号电机 | 3号电机 | 2号电机 | 1号电机 | 0号电机 | 所有电机 |
| ------ | -------- | ---- | ------- | ------- | ------- | ------- | ------- | -------- |
| 指令   | 0x14     | ...  | 0x04    | 0x03    | 0x02    | 0x01    | 0x00    | 0xff     |

| 方向 | 逆时针 | 顺时针 |
| ---- | ------ | ------ |
| 指令 | 0x00   | 0x01   |

| 步数 | x步数   |         |
| ---- | ------- | ------- |
| 指令 | x高八位 | x低八位 |

| 最高速 | 高八位 | 停止 |
| ------ | ------ | ---- |
| 指令   | 0xxx   | 0xxx |

| 运行状态 | 运行 | 停止 |
| -------- | ---- | ---- |
| 指令     | 0xff | 0x00 |

## 暂停指令

所有电机，步数为零，速度为零，停止指令

| 帧头 | COMMAND | 电机号 | 方向 | 步数 | 速度 | 运行状态 | 校验位 |
| ---- | ------- | ------ | ---- | ---- | ---- | -------- | ------ |
| 55aa | 0x01    | 00     | 00   | 0000 | 0000 | 00       | CRC16  |

55aa  0x01  0xff  0x00  0000  0000  00  CRC16

## 继续运行指令

电机不变，方向不变、步数不变、速度不变，运行指令（不变保持为全一）

| 帧头 | COMMAND | 电机号 | 方向 | 步数 | 速度 | 运行状态 | 校验位 |
| ---- | ------- | ------ | ---- | ---- | ---- | -------- | ------ |
| 55aa | 0x02    | 00     | 00   | 0000 | 0000 | 00       | CRC16  |

55aa  0x02  ff  ff  ffff  ffff  ff  CRC16

## 复位指令

所有电机归零、方向不定，步数归零、速度归零，运行指令(全部归零)

| 帧头 | COMMAND | 电机号 | 方向 | 步数 | 速度 | 运行状态 | 校验位 |
| ---- | ------- | ------ | ---- | ---- | ---- | -------- | ------ |
| 55aa | 0x03    | 00     | 00   | 0000 | 0000 | 00       | CRC16  |

55aa  0x03  ff  00  0000  0000  ff  CRC16

## 接收反馈指令

帧长：4bit

帧头：0x55AA

指令：反馈正确与否

| 反馈状态 | 正确   | 错误   |
| -------- | ------ | ------ |
| 指令     | 0x0000 | 0xFFFF |



# 谢

## 电机控制

| 帧头 | 指令 | 步数        | 电机数（两个）    | 方向                |      |
| ---- | ---- | ----------- | ----------------- | ------------------- | ---- |
| 55AA | 4960 | xx_xx_xx_xx | xx(从1开始计数)xx | 1(顺时针)/0(逆时针) |      |

## 停止

55	AA	54	AA

## 继续

55	AA	54	BB

## 复位

55	AA	54	CC

